---
title: Security update available for Adobe Commerce - [!DNL APSB24-40]
promoted: true
description: Apply a hotfix and patch to remediate [!DNL CVE-2024-34102] for Adobe Commerce 2.4.4-p8, 2.4.5-p7, 2.4.6-p5, 2.4.7 and earlier versions.
feature: Compliance, Security
role: Developer
---
# Security update available for Adobe Commerce - [!DNL APSB24-40]

>[!NOTE]
>
>**This is an urgent update related to [!DNL CVE-2024-34102]. Adobe is aware that [!DNL CVE-2024-34102] has been exploited in the wild in very limited attacks targeting Adobe Commerce merchants.

On July 17, 2024, we released a [!DNL hotfix] in addition to the security update release on June 11, 2024, and/or the isolated patch released on June 28, 2024.

**Please check all production and non-production environments to help ensure your store is completely patched on all instances.  Please take <u>immediate action</u> to resolve the vulnerability.**

>[!NOTE]
>
>**For Adobe Commerce on Cloud merchants only**:<br><br>1. Make sure that you are on the latest version of [!DNL ECE Tools]. If you are not, upgrade (or skip to item 2). To check your existing version, run this command:`composer show magento/ece-tools`<br>2. If you are already on the latest version of [!DNL ECE Tools], check for the presence of the `op-exclude.txt` file. To do so, run this command:`ls op-exclude.txt`.If this file is not present, add https://github.com/magento/magento-cloud/blob/master/op-exclude.txt to your repo, then commit the change and redeploy.<br>3. Without having to upgrade [!DNL ECE Tools], you can also just add/modify https://github.com/magento/magento-cloud/blob/master/op-exclude.txt in your repo, then commit the change and redeploy.

## Option 1 - For merchants who have <u>not</u> applied the security update from June 11, 2024, nor the isolated patch released on June 28, 2024

1. Apply the security update.
1. Apply the [[!DNL [hotfix]](#hotfix)] released on July 17, 2024.
1. Rotate your [!DNL encryption keys].

OR

1. Apply the isolated patch. **NOTE: This version of the isolated patch contains the July 17, 2024, [!DNL hotfix] within it.** 
1. Rotate your [!DNL encryption keys].

## Option 2 - For merchants who have <u>already</u> applied the security update from June 11, 2024, and/or the isolated patch released on June 28, 2024

1. Apply the [[!DNL [hotfix]](#hotfix)] released on July 17, 2024.
1. Rotate your [!DNL encryption keys].

## Option 3 - For merchants who have <u>already</u> (1) applied the security update from June 11, 2024, and/or (2) the isolated patch released on June 28, 2024, and (3) rotated your encryption keys

* Apply the [[!DNL [hotfix]](#hotfix)].


>[!NOTE]
>
>To ensure you are still safe after upgrading, you must also **[rotate your [!UICONTROL encryption keys]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)**.

In this article you will find how to implement the isolated patch for this issue for the current and earlier versions of Adobe Commerce and Magento Open Source. 
 
## Affected products and versions

Adobe Commerce on Cloud, Adobe Commerce on-premise, and Magento Open Source:

* 2.4.7 and earlier
* 2.4.6-p5 and earlier
* 2.4.5-p7 and earlier
* 2.4.4-p8 and earlier

## Solution for Adobe Commerce on Cloud, Adobe Commerce on-premise Software, and Magento Open Source 

To help resolve the vulnerability for the affected products and versions, you must apply the [!DNL VULN-27015] patch (dependent on your version) and rotate your [!UICONTROL encryption keys].


## Hotfix Details {#hotfix}

* Download the [!DNL Hotfix] [AC-12485_Hotfix_COMPOSER_patch.zip](assets/AC-12485_Hotfix_COMPOSER_patch.zip)

## Isolated Patch Details

**NOTE: This version of the isolated patch contains the July 17, 2024, [!DNL hotfix] within it.**  

Use the following attached patches, depending on your Adobe Commerce/Magento Open Source version:

### For version 2.4.7:

* [VULN-27015-2.4.7x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.7x_v2_COMPOSER_patch.zip)

### For versions 2.4.6, 2.4.6-p1, 2.4.6-p2, 2.4.6-p3, 2.4.6-p4, 2.4.6-p5:

* [VULN-27015-2.4.6x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.6x_v2_COMPOSER_patch.zip)

### For versions 2.4.5, 2.4.5-p1, 2.4.5-p2, 2.4.5-p3, 2.4.5-p4, 2.4.5-p5, 2.4.5-p6, 2.4.5-p7:

* [VULN-27015-2.4.5x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.5x_v2_COMPOSER_patch.zip)

### For versions 2.4.4, 2.4.4-p1, 2.4.4-p2, 2.4.4-p3, 2.4.4-p4, 2.4.4-p5, 2.4.4-p6, 2.4.4-p7, 2.4.4-p8:

* [VULN-27015-2.4.4x_v2_COMPOSER_patch.zip](assets/VULN-27015-2.4.4x_v2_COMPOSER_patch.zip)


## How to apply the isolated patch and the [!DNL hotfix]

Unzip the file and see [How to apply a composer patch provided by Adobe](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/how-to/how-to-apply-a-composer-patch-provided-by-magento.html) in our support knowledge base for instructions.

## For Adobe Commerce on Cloud merchants only - How to tell whether the isolated patches have been applied

Considering that it isn't possible to easily check if the issue was patched, you might want to check whether the [!DNL VULN-27015] isolated patch has been successfully applied. 

<u>You can do this by taking the following steps, using the file `VULN-27015-2.4.7_COMPOSER.patch` as an example</u>:

1. [Install the Quality Patches Tool](https://experienceleague.adobe.com/docs/commerce-operations/tools/quality-patches-tool/usage.html).
1. Run the command:<br>
 ![cve-2024-34102-tell-if-patch-applied-code](assets/cve-2024-34102-tell-if-patch-applied-code.png)

<!--
    ```bash
    vendor/bin/magento-patches -n status |grep "27015\|Status"
    ```
-->

1. You should see output similar to this, where VULN-27015 returns the *Applied* status:

    ```bash
    ║ Id            │ Title                                                        │ Category        │ Origin                 │ Status      │ Details                                          ║ ║ N/A           │ ../m2-hotfixes/VULN-27015-2.4.7_COMPOSER_patch.patch      │ Other           │ Local                  │ Applied     │ Patch type: Custom                                
    ```

## Rotate/change the [!UICONTROL encryption key] after applying the patch

* For guidance **on how to rotate/change the [!UICONTROL encryption key] after applying the patch, please refer to [Admin systems guide: [!UICONTROL Encryption key]](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/encryption-key)** in the Commerce Admin Systems Guide documentation.

## Security updates

Security updates available for Adobe Commerce:

* [Adobe Security Bulletin ([!DNL APSB24-40])](https://helpx.adobe.com/security/products/magento/apsb24-40.html)
